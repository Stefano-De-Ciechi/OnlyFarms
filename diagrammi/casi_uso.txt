Casi d'uso

descrizione testuale dei vari casi d'uso descritti nel diagramma UML
(basato sul file "elementi dominio e casi d'uso" caricato sul DIR)

===============================================================================

Attore: Utente Generico
Caso d'uso: Accesso al sistema - Login

1.	l'utente sceglie la metodologia di accesso: credenziali o OAuth2

2.	l'utente inserisce le proprie credenziali oppure sfrutta OAuth2 (es. accesso via Google)
   
3.	all'utente viene permesso o negato l'accesso al sistema

Estensioni:

3.1	se l'utente non è registrato viene reindirizzato sulla pagina di registrazione alla piattaforma
3.2	se l'utente era stato bloccato da un amministratore del sistema viene mostrata una pagina di errore

-------------------------------------------------------------------------------

Attore: Utente non registrato
Caso d'uso: Registrazione al sistema

1.	l'utente indica il proprio tipo: Gestore Idrico o Gestore Agricolo

2.	l'utente sceglie la metodologia di registrazione: credenziali o OAuth2

3.	l'utente compila i vari campi richiesti (nome utente e password) oppure segue i passaggi 
	richiesti da OAuth2
	
4.	la registrazione ha successo oppure fallisce

Estensioni:

4.1	se l'utente è già registrato (es. nome utente già utilizzato) viene mostrato un messaggio di avviso
4.2	se la registrazione ha successo, l'utente viene reindirizzato alla pagina di Accesso - Login
4.3	se la registrazione fallisce viene mostrato un messaggio con eventuali errori

Note:
	gli utenti, una volta registrati, ed indipendentemente dal proprio tipo, non possiedono nessuna 
	autorizzazione, che deve essergli assegnata da un utente amministratore

-------------------------------------------------------------------------------

Attore: Utente Amministratore del sistema
Caso d'uso: Gestione Utenti del sistema

1.	l'amministratore chiede di visualizzare l'elenco di utenti registrati al sistema

2.	l'amministratore sceglie l'azione da compiere: Concedi o Rimuovi autorizzazioni ad un utente 
	oppure rimuovi utente dal sistema
	
Estensioni:

2.1	concessione di autorizzazioni: l'amministratore definisce le autorizzazioni da garantire ad
	un determinato utente in base al suo tipo (Gestore Idrico o Gestore Agricolo)

2.2	rimozione di autorizzazioni: l'amministratore visualizza e rimuove le autorizzazioni precedentemente
	concesse ad un utente registrato
	
2.3	rimozione di un utente:	l'amministrazione sceglie l'utente da rimuovere; viene richiesta conferma
	dell'eliminazione ed in caso affermativo i dati vengono cancellati
	
-------------------------------------------------------------------------------

Attore: Gestore Agricolo
Caso d'uso: Gestione delle prenotazioni idriche di un'azienda agricola

1.	il gestore chiede di visualizzare l'elenco di aziende idriche disponibili ad erogare un servizio 
	di rifornimento idrico e ne sceglie una

2.	il gestore effettua una prenotazione inserendo la quantità di acqua che vorrebbe ricevere

3.	la prenotazione può essere accettata oppure rifiutata

4.	se la prenotazione viene accettata entra in vigore dal giorno successivo e la si salva nello 
	storico prenotazioni

5.	il gestore può richiedere di visualizzare lo storico delle prenotazioni ed eseguire delle operazioni
	sull'ultima prenotazione (quella corrente): aggiornamento o cancellazione

Estensioni:

2.1	prima di effettuare una prenotazione il gestore può eseguire una stima basandosi sulle misurazioni
	ottenute dai sensori della propria azienda e può affidarsi al servizio meteo offerto direttamente
	dalla piattaforma

5.1	aggiornamento di una prenotazione: il gestore inserisce il dato aggiornato sulla quantità di acqua,
	l'aggiornamento può essere accettato oppure rifiutato, se accettato la nuova prenotazione entra
	in vigore dal giorno successivo e viene salvata nello storico prenotazioni
	
5.2	cancellazione di una prenotazione: il gestore interrompe il servizio di rifornimento idrico
	attualmente in corso con una data azienda

--------------------------------------------------------------------------------

Attore: Gestore Agricolo
Caso d'uso: Gestione delle coltivazioni di un'azienda agricola

1.	il gestore chiede di visualizzare l'elenco delle coltivazioni della sua azienda

2.	il gestore sceglie l'azione da compiere: nuovo inserimendo, modifica o rimozione (nel secondo
	e terzo caso deve anche selezionare una delle coltivazioni)

Estensioni:

2.1	nuovo inserimento: il gestore inserisce i dati della coltivazione (dimensione, esigenza d'acqua, 
	umidità ideale, tipo di irrigazione). Dopo una conferma i dati della nuova coltivazione vengono
	registrati
	
2.2	modifica: al gestore viene mostrata una scheda con i dati della coltivazione e può modificare
	i vari campi. Al termine deve confermare le modifiche ed i nuovi dati vengono registrati

2.3	rimozione: viene chiesta conferma dell'eliminazione ed in caso affermativo i dati vengono cancellati

--------------------------------------------------------------------------------

Attore: Gestore Agricolo
Caso d'uso: Gestione di sensori di un'azienda agricola

1.	il gestore chiede di visualizzare l'elenco di sensori relativi ad una coltivazione
	della sua azienda
	
2.	il gestore sceglie l'azione da compiere: nuovo inserimento, lettura misurazioni o rimozione

Estensioni:

2.1	nuovo inserimento: il gestore configura opportunamente il nuovo sensore, selezionando il topic
	sul quale verranno pubblicate le misurazioni

2.2	lettura misurazioni: il gestore chiede di visualizzare lo storico delle misurazioni relative al
	sensore selezionato
	
2.3	rimozione sensore: viene chiesta conferma dell'eliminazione ed in caso affermativo il sensore
	viene rimosso dall'elenco relativo alla coltivazione corrente 
	
--------------------------------------------------------------------------------

Attore: Gestore Agricolo
Caso d'uso: Gestione di attuatori di un'azienda agricola

1.	il gestore chiede di visualizzare l'elenco di attuatori relativi ad una coltivazione
	della sua azienda
	
2.	il gestore sceglie l'azione da compiere: nuovo inserimento, gestione o rimozione

Estensioni:

2.1	nuovo inserimento: il gestore configura opportunamente il nuovo attuatore, selezionando i topic
	sui quali verranno letti i comandi e pubblicati gli stati

2.2	gestione: il gestore può impostare manualmente lo stato dell'attuatore (attivo/inattivo)
	
2.3	rimozione attuatore: viene chiesta conferma dell'eliminazione ed in caso affermativo l'attuatore
	viene rimosso dall'elenco relativo alla coltivazione corrente 

--------------------------------------------------------------------------------

Attore: Gestore Idrico
Caso d'uso: Gestione delle prenotazioni d'acqua

1.	il gestore chiede di visualizzare l'elenco di prenotazioni ricevute dalla propria azienda

2.	il gestore, dopo aver selezionato una prenotazione, sceglie l'azione da compiere: accettazione
	o rifiuto
	
Estensioni:

2.1	se il gestore accetta la prenotazione, questa entra in vigore dal giorno successivo

---------------------------------------------------------------------------------

Attore: Gestore Idrico
Caso d'uso: Gestione della riserva idrica

1.	il gestore chiede di visualizzare informazioni sulla riserva idrica della propria azienda

2.	il gestore sceglie l'azione da compiere: aggiornare la disponibilità idrica oppure aggiornare
	i limiti di erogazione globali
	
Estensioni:

2.1	aggiornamento disponibilità idrica: il gestore inserisce la nuova quantità disponibile
	che può essere maggiore o minore di quella precedente
	
2.2	aggiornamento limiti di erogazione: il gestore inserisce i nuovi limiti di erogazione globali

---------------------------------------------------------------------------------

Attore: Gestore Idrico
Caso d'uso: Gestione delle Aziende Agricole

1.	il gestore chiede di visualizzare la lista di aziende agricole attualmente rifornite

2.	il gestore, dopo aver selezionato un'azienda, sceglie l'azione da compiere: visualizzare dati
	relativi ai consumi oppure aggiornare i limiti di erogazione
	
Estensioni:

2.1	visualizza dati relativi ai consumi: il gestore prende visione dello storico delle prenotazioni
	relative all'azienda selezionata
	
2.2	aggiorna limiti di erogazione: il gestore inserisce i nuovi limiti di erogazione relativi
	all'azienda selezionata

----------------------------------------------------------------------------------

Attore: Sensore
Caso d'uso: Invio Misure

1.	il sensore rileva continuamente le misure; queste vengono inviate e quindi registrate con una data
	periodicità nel sistema. Ogni misura deve riportare un timestamp

----------------------------------------------------------------------------------

Attore: Attuatore
Caso d'uso: Ricezione Comandi

1.	l'attuatore riceve un comando direttamente da un gestore agricolo dell'azienda a cui appartiene
	oppure in base a parametri e misurazioni ricevute dai sensori
	
2.	l'attuatore cambia stato (es. acceso/spento)

3.	l'attuatore invia informazioni sul proprio stato corrente; queste informazioni saranno registrate
	nel sistema

Estensioni:

3.1	ogni informazione registrata deve riportare un timestamp

